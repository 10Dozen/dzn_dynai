<html>
	<head>
		<title>DYNAI Zone Configurator</title>
		<script src="jquery-2.1.3.min.js"></script>
		<script>
			var westManDefault		= "B_Soldier_F";
			var eastManDefault 		= "O_Soldier_F";
			var resistanceManDefault 	= "I_soldier_F";
			var civilianManDefault 		= "C_man_1";		
			var defaultUnitClassname 	= "";
		
			var groupCounter 		= 0;
			var groupAddRemoveGroupButton 	= "<input class='groupRemove' type='button' value='Remove Group'>";
			var groupAddUnitVehicle 	= "<input class='vehicleAdd' type='button' value='Add Vehicle'>";
			var groupAddUnit 		= "<input class='unitAdd' type='button' value='Add Unit'>";
			var groupAddHtml 		= "";
			
			var unitRemove 		= "<input class='unitRemove' type='button' value='X'>";
			
			var vehAssignementRemove	= "<input class='unitAssignementRemove' type='button' value='X'>";
							
							
							
			$( document ).ready(function() {
				$( "#groupAdd" ).click( function(event) {
					// Add group
					var groupName = $.map($('#groupName'), function (input) { return $(input).val() })
					if (groupName == "") {
						groupName = "Group Template #" + groupCounter;
					} else {
						groupName = '"' + groupName + '"';
					}					
					
					groupAddHtml = "<div class='group" + groupCounter + "'><br>" 
					+ groupName + " " + groupAddRemoveGroupButton +"<br><input type='number' placeholder='Count of groups'><div class='squad'><br></div>"
					+ groupAddUnitVehicle + groupAddUnit				
					+"</div>";
	
					$( groupAddHtml ).appendTo( "#zone_groups" );
					groupCounter++;
					
					// Remove added group
					$( ".groupRemove" ).click( function(event) {						
						$( $( event.target ).parent() ).remove();
					});
					
					
					// *********************
					// Add vehicle to group
					// *********************
					$( ".vehicleAdd" ).click( function(event) {
						var squadItem = $( ($( event.target).parent()).find( "div[class='squad']") );
						var unitId = (squadItem.children().length) - 1;
						console.log( unitId );
						
						var vehicelAdd =  "<div class='unit'>" + unitRemove + " <div class='unitName'> Vehicle ID " + unitId + " </div>"
							+ "<input type='text' placeholder='Classname of vehicle'> | <input type='text' placeholder='Kit of vehicle'>";
						
					
					
						$( vehicelAdd ).appendTo( $( event.target ).parent().find(".squad"));
						
						// Remove vehicle from group
						$( "input[class='unitRemove']").click( function(event) {
							$( $( event.target ).parent() ).remove();
						});
					});
					
					// *********************
					// Add unit to group
					// *********************
					$( ".unitAdd" ).click( function(event) {
						var defaultUnitClassname = "";
						switch ( $( "input[name='side']:checked" ).val() ) {
							case "west": 	defaultUnitClassname = westManDefault; break;
							case "east": 	defaultUnitClassname = eastManDefault; break;
							case "resistance": 	defaultUnitClassname = resistanceManDefault; break;
							case "civilian": 	defaultUnitClassname = civilianManDefault; break;
							default: 		defaultUnitClassname = "";								
						}	
						
						var squadItem = $( ($( event.target).parent()).find( "div[class='squad']") );
						var unitId = squadItem.children().length;
						console.log( unitId );
						
						var unitAdd = 
							"<div class='unit'>" 
								+ unitRemove 
								+ " <div class='unitName'> Infantry </div>"
								+ "<input type='text' placeholder='Classname of unit' value='" + defaultUnitClassname + "'> | <input type='text' placeholder='Kit for unit'> | "
								+ "<div>"
									+ "<input type='radio' name='unitType" + unitId + "' value='patrol'>Patrol"
									+ "<input type='radio' name='unitType" + unitId + "' value='inBuilding'>In building"
									+ "<input type='radio' name='unitType" + unitId + "' value='inVehicle'>In vehicle"
								+ "</div>"
							+ "</div>";
						
						$( unitAdd ).appendTo( $( event.target ).parent().find(".squad") );
						
						$( "input[value='inVehicle']" ).click( function(event) {
							$ ( $(event.target).parent() ).append(" <div class='horDiv'><input type='text' placeholder='VehID'><input type='text' placeholder='Vehicle crew role'>" + vehAssignementRemove + "</div>");
							
							$( "input[class='unitAssignementRemove']" ).click( function(event) {
								$( $(event.target).parent() ).remove();
							});
						});
						
						// Remove unit from group
						$( "input[class='unitRemove']").click( function(event) {
							$( $( event.target ).parent() ).remove();
						});
					});
					
				});
				
				
				
				
			});
			
			
				
				
		</script>

		
		
		
		
		
		
		
		<style>
			.hRadio {
				position: relative;				
				display: inline-block;
				width: 85px;
			
				color: #FF6666;
			}
			
			.vehIdText {
				width: 50px;
			}
			
			.unitName {
				display: inline-block;
				width: 125px;
			}
		</style>
	</head>
	<body>
		<h1>xmlDynai</h1>
		
		<div id="mainWrap" align="left">
			<p id="zone_name"><input placeholder="zoneName"></p>
			<div id="zone_side">Side
				<div class="hRadio"><input type="radio" name="side" value="west">West</div>
				<div class="hRadio"><input type="radio" name="side" value="east">East</div>
				<div class="hRadio"><input type="radio" name="side" value="resistance">Indep</div>
				<div class="hRadio"><input type="radio" name="side" value="civilian">Civ</div>
			</div>			
			<p id="zone_status">Is Active<input type="checkbox" placeholder="is Active"></p>
			<hr>
			<p id="zone_unit">Units<br>
				<input id="groupName" type="text" placeholder="Name of the groop (optional)">
				<input id="groupAdd" type="button" value="Add Group">
				<div id="zone_groups">					
				</div>
			</p>
				
				<!-- <div class='group'>	
						Group 1<br>
						<input type='number' placeholder='Count of groups'><br>
						<div id='squad'>
							<div id='unit'>id 0
								<input type='text' placeholder='Classname of unit'> |	
								<input type='radio' name="unitType0" value="isVehicle">Is vehicle | 
								<input type='text' placeholder='Kit for unit'>
								<input id="unitRemove" type="button" value="X">
							</div>
							<div id='unit'>id 1
								<input type='text' placeholder='Classname of unit'> | 
								<input type='radio' name="unitType1" value="patrol">Patrol
								<input type='radio' name="unitType1" value="inBuilding">In building
								<input type='radio' name="unitType1" value="inVehicle">In vehicle
								<input class='vehIdText' type='text' placeholder='Veh ID'>
								<input type='text' placeholder='Crew role'> | 
								<input type='text' placeholder='Kit for unit'>
								<input id="unitRemove" type="button" value="X">
							</div>
							<div id='unit'>id 2
								<input type='text' placeholder='Classname of unit'> | 
								<input type='radio' name="unitType2" value="patrol">Patrol
								<input type='radio' name="unitType2" value="inBuilding">In building
								<input type='radio' name="unitType2" value="inVehicle">In vehicle
								<input class='vehIdText' type='text' placeholder='Veh ID'>
								<input type='text' placeholder='Crew role'> |
								<input type='text' placeholder='Kit for unit'>
								<input id="unitRemove" type="button" value="X">
							</div>
							<input id="unitAdd" type="button" value="Add Vehicle">
							<input id="unitAdd" type="button" value="Add Unit">
							<input id="unitAdd" type="button" value="Add Unit (to building)">
						</div>
					</div>
					<div class='group'>	
						Group 2<br>
						<input type='number' placeholder='Count of groups'><br>
						<div id='squad'>
							<div id='unit'>id 0
								<input type='text' placeholder='Classname of unit'> | 
								<input type='radio' name="unitType" value="isVehicle">Vehicle
								<input type='radio' name="unitType" value="patrol">Patrol
								<input type='radio' name="unitType" value="inBuilding">In building
								<input type='radio' name="unitType" value="inVehicle">In vehicle
								<input type='text' placeholder='Vehicle ID'> | 
								<input type='text' placeholder='Kit for unit'>
								<input id="unitRemove" type="button" value="X">
							</div>
							<input id="unitAdd" type="button" value="Add Vehicle">
							<input id="unitAdd" type="button" value="Add Unit">
							<input id="unitAdd" type="button" value="Add Unit (to building)">
						</div>
					</div>
				
					-->
				<!--<div><input type="number" min=0 name="count" value="limited" pattern="[0-9]{1,3}"></div> -->
				<!-- RefUnits -->				
					<!-- Template -->
						<!-- Count -->
						<!-- Units -->
							<!-- Unit 1 -->
								<!-- Unit 1 Classname -->
								<!-- Unit 1 Assignement-->
									<!-- Unit 1 Assignement ID -->
									<!-- Unit 1 Assignement Role -->
								<!-- Unit 1 Kit-->
			
			<!-- Behavior -->
					<!-- speedMode -->
					<!-- behavior -->
					<!-- combatMode -->
					<!-- formation -->
			<hr>
			<p>Behavior Settings</p>		
			<p id="zone_speedMode">Speed Mode<br>
				<div class="hRadio"><input type="radio" name="speedMode" value="limited">Limited</div>
				<div class="hRadio"><input type="radio" name="speedMode" value="normal">Normal</div>
				<div class="hRadio"><input type="radio" name="speedMode" value="full">Full</div>
			</p>					
			<p id="zone_behavior">Behavior<br>
				<div class="hRadio"><input type="radio" name="behavior" value="careless">Careless</div>
				<div class="hRadio"><input type="radio" name="behavior" value="safe">Safe</div>
				<div class="hRadio"><input type="radio" name="behavior" value="aware">Aware</div>
				<div class="hRadio"><input type="radio" name="behavior" value="combat">Combat</div>
				<div class="hRadio"><input type="radio" name="behavior" value="stealth">Stealth</div>
			</p>
			<p id="zone_combatMode">Combat Mode<br>
				<div class="hRadio"><input type="radio" name="combatMode" value="blue">Blue</div>
				<div class="hRadio"><input type="radio" name="combatMode" value="green">Green</div>
				<div class="hRadio"><input type="radio" name="combatMode" value="white">White</div>
				<div class="hRadio"><input type="radio" name="combatMode" value="yellow">Yellow</div>
				<div class="hRadio"><input type="radio" name="combatMode" value="red">Red</div>
			</p>
			<p id="zone_formation">Formation<br>
				
			
			
				<input type="radio" name="formation" value="COLUMN">Column<br>
				<input type="radio" name="formation" value="STAG COLUMN">Staggered Column<br>
				<input type="radio" name="formation" value="WEDGE">Wedge<br>
				<input type="radio" name="formation" value="ECH LEFT">Echelon L(eft)<br>
				<input type="radio" name="formation" value="ECH RIGHT">Echelon R(ight)<br>
				<input type="radio" name="formation" value="VEE">Vee<br>
				<input type="radio" name="formation" value="LINE">Line <br>
				<input type="radio" name="formation" value="stealth">Delta<br>
				<input type="radio" name="formation" value="stealth">Column (compact)<br>			
			</p>			
		</div>
		
		<hr>
		<div align="center"><input id="configButton" type="button" value="Create Zone Config"></div>
		<hr>	
		<div id="zoneArray" align="center">
			<textarea name="comment" cols="85" rows="5">Arma SQF here..</textarea>
		<div>
		
	</body>
</html>
